/*!
 * name: next-canvas-multiline-text
 * url: https://github.com/afeiship/next-canvas-multiline-text
 * version: 1.0.0
 * date: 2019-09-09T02:33:54.893Z
 * license: MIT
 */
!function(){var e=e||this||window||Function("return this")(),t=e.nx||require("next-js-core2"),i={lineClamp:100,limitWidth:500,lineHeight:20,canvas:null,callback:t.noop,text:"",tail:"..."},n=function(e){return e?e.replace(/[\r\n]/g,""):e};t.canvasMultilineText=function(e){var l=t.mix(null,i,e),a=l.canvas.getContext("2d"),u=n(l.text).split(""),r="",s=1,o=[],c=null,p=u.length,h=p-1,m=0;if(!l.text)return{line:0,items:o};for(l.callback(a);m<p;m++){if(r+=u[m],c=a.measureText(r),c.width>=l.limitWidth&&(o.push(r),s++,r=""),s-1===l.lineClamp)break}if(m<h){var x=o[o.length-1].split("");x.splice(-2,2),x.push(l.tail),o[o.length-1]=x.join("")}return r&&o.push(r),{line:Math.min(s,l.lineClamp),items:o}},"undefined"!=typeof module&&module.exports&&(module.exports=t.canvasMultilineText)}();